<div class="flex flex-col lg:flex-row">
  <div>
    <!-- Empty Left Side Panel -->
  </div>
  <div class="bg-slate-800 rounded-md p-5">
    <div class="relative" [style.width.px]="width" [style.height.px]="height">
      <img
        src="/assets/store_floorplan.png"
        [width]="width"
        [height]="height"
      />
      <canvas
        #heatmapCanvas
        class="absolute left-0 top-0 z-20"
        [style.cursor]="tooltip.visible ? 'pointer' : 'default'"
        [width]="width"
        [height]="height"
        (mousemove)="handleMouseMovement($event)"
        (click)="handleMouseClick($event)"
      ></canvas>
      <div
        #overlayDiv
        class="absolute bg-slate-600 z-30 pointer-events-none p-1.5 text-white rounded-md text-center"
        style="width: 200px"
        [style.left.px]="tooltip.x"
        [style.top.px]="tooltip.y"
        [style.display]="tooltip.visible ? 'block' : 'none'"
      >
        <strong>{{ tooltip.title }}</strong
        ><br />
        {{ tooltip.content }}
      </div>

      <div
        class="absolute z-30 right-0 bottom-0 flex flex-row text-white pointer-events-none"
      >
        <div class="text-lg mr-3">Key:</div>
        <div class="text-xs text-center" style="width: 105px">
          <div
            class="w-full h-4 px-1"
            [style.background-color]="colors[3] + '77'"
          >
            &gt;5% anomalies
          </div>
          <div
            class="w-full h-4 px-1"
            [style.background-color]="colors[2] + '77'"
          >
            &gt;2.5% anomalies
          </div>
          <div
            class="w-full h-4 px-1"
            [style.background-color]="colors[1] + '77'"
          >
            &gt;0% anomalies
          </div>
          <div
            class="w-full h-4 px-1"
            [style.background-color]="colors[0] + '77'"
          >
            No anomalies
          </div>
        </div>
      </div>
    </div>
  </div>
  <div>
    <app-region-details [region]="selectedRegion"></app-region-details>
  </div>
</div>
